{% extends "_base.html" %}
{% load i18n %}

{% block title %}{% trans "My Campaigns" %}{% endblock title %}

{% block styles %}
<style>
.campaign-card {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.campaign-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

.campaign-card .card-title a {
    color: #495057;
    transition: color 0.2s ease-in-out;
}

.campaign-card .card-title a:hover {
    color: #0d6efd;
}

.campaign-card .card-footer {
    border-top: 1px solid rgba(0, 0, 0, 0.125);
    background-color: rgba(0, 0, 0, 0.02);
}

.campaign-info {
    font-size: 0.9rem;
}

.campaign-info i {
    width: 16px;
    text-align: center;
    margin-right: 0.5rem;
}
</style>
{% endblock styles %}

{% block content %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>{% trans "My Campaigns" %}</h2>
        <a href="{% url 'campaigns-create' %}" class="btn btn-outline-primary">{% trans "Create Campaign" %}</a>
    </div>
    
    {% if campaigns %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            {% for campaign in campaigns %}
                <div class="col">
                    <div class="card h-100 shadow-sm campaign-card">
                        <div class="card-body">
                            <h5 class="card-title">
                                <a href="{% url 'campaigns-detail' campaign.pk %}" class="text-decoration-none">{{ campaign.name }}</a>
                                {% if campaign in owner_campaigns %}
                                    <span class="badge bg-primary ms-2">{% trans "Owner" %}</span>
                                {% elif campaign in member_campaigns %}
                                    <span class="badge bg-secondary ms-2">{% trans "Member" %}</span>
                                {% else %}
                                    <span class="badge bg-info ms-2">{% trans "Other" %}</span>
                                {% endif %}
                            </h5>
                            
                            {% if campaign.description %}
                                <p class="card-text text-muted mb-3">{{ campaign.description|truncatewords:20 }}</p>
                            {% endif %}
                            
                            <div class="campaign-info">
                                <div class="mb-2">
                                    <i class="bi bi-calendar-event text-muted"></i>
                                    <strong>{% trans "Date:" %}</strong> {{ campaign.start_date|date:"d.m.Y H:i" }} â€“ {{ campaign.end_date|date:"d.m.Y H:i" }}
                                </div>
                                <div class="mb-2">
                                    <i class="bi bi-globe text-muted"></i>
                                    <strong>{% trans "Public:" %}</strong> 
                                    {% if campaign.public %}
                                        <span class="badge bg-success">{% trans "Yes" %}</span>
                                    {% else %}
                                        <span class="badge bg-warning">{% trans "No" %}</span>
                                    {% endif %}
                                </div>
                                {% if campaign.organization %}
                                    <div class="mb-2">
                                        <i class="bi bi-building text-muted"></i>
                                        <strong>{% trans "Organization:" %}</strong> {{ campaign.organization.name }}
                                    </div>
                                {% endif %}
                                <div class="mb-2">
                                    <i class="bi bi-people text-muted"></i>
                                    <strong>{% trans "Participants:" %}</strong> {{ campaign.users.count }}
                                </div>
                                <div class="mb-2">
                                    <i class="bi bi-door-open text-muted"></i>
                                    <strong>{% trans "Rooms:" %}</strong> {{ campaign.rooms.count }}
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="d-flex gap-2 justify-content-end">
                                <a href="{% url 'campaigns-detail' campaign.pk %}" class="btn btn-primary btn-sm">
                                    <i class="bi bi-eye"></i>
                                    <span class="d-none d-sm-inline">{% trans "Details" %}</span>
                                </a>
                                {% if campaign in owner_campaigns or user.is_superuser %}
                                    <a href="{% url 'campaigns-update' campaign.pk %}" class="btn btn-secondary btn-sm">
                                        <i class="bi bi-pencil-square"></i>
                                        <span class="d-none d-sm-inline">{% trans "Edit" %}</span>
                                    </a>
                                    <a href="{% url 'campaigns-delete' campaign.pk %}" class="btn btn-danger btn-sm">
                                        <i class="bi bi-trash"></i>
                                        <span class="d-none d-sm-inline">{% trans "Delete" %}</span>
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-5">
            <div class="alert alert-info" role="alert">
                <i class="bi bi-info-circle me-2"></i>
                {% trans "No campaigns found." %}
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}